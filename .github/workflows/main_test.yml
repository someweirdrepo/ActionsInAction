name: My first Run

on:
  repository_dispatch:
    types: [event1, event2]
  workflow_dispatch:
    inputs:
      homedrive:
        description: "The home drive on the machine"
        required: true
      logLevel:
        description: "Log level"
        default: "warning"
        type: choice
        options:
          - info
          - warning
          - debug
      tag:
        description: "Apply tag after successfull test run"
        required: true
        type: boolean
      environment:
        description: "Environment to run tests against"
        type: environment
        required: true
        default: "production"

jobs:
  run-tests:
    name: Run Tests
    runs-on: ubuntu-latest
    environment: ${{ inputs.environment }}
    steps:
      - name: Show inputs
        run: |
          echo "Home Drive: ${{ inputs.homedrive }}"
          echo "Log Level: ${{ inputs.logLevel }}"
          echo "Tag After Run: ${{ inputs.tag }}"
          echo "Environment: ${{ inputs.environment }}"

      - name: Simulate test run
        run: |
          echo "Running tests on drive ${{ inputs.homedrive }} with log level ${{ inputs.logLevel }}"
          # Simulate conditional tagging
          if [ "${{ inputs.tag }}" = "true" ]; then
            echo "Tests passed, would apply tag here."
          else
            echo "Tagging skipped."
          fi
  MyFirstJob:
    runs-on: ubuntu-latest
    steps:
      - run: echo "ðŸ‘‹ Hello World!"
      - name: Checkout code
        uses: actions/checkout@v3.5.2
      - name: Run pwsh script
        run: |
          pwsh -c "gci . -Recurse | FT PSPath"
          echo "${{ github.directory }}"
